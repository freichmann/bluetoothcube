#:kivy 1.0.9

<CubeButton>:
    button: button
    size_hint: 1, None
    height: button.height + dp(30)
    Button:
        id: button
        size_hint: 0.85, None
        font_size: '50sp'
        # height: self.texture_size[1] + sp(10)
        # size: self.texture_size
        height: '80sp'
        always_relase: True

<BluetoothCubeRoot>:
    timedisplay: timedisplay
    cubelist: cubelist
    connecting_label: connecting_label
    connecting_progressbar: connecting_progressbar
    connecting_cancelbutton: connecting_cancelbutton
    
    Screen:
        name: "cube-selection"
        BoxLayout:
            orientation: 'vertical'
            Label:
                size_hint: 1, None
                text: "Select a cube:"
                font_size: '40sp'
                height: '42sp'
            BoxLayout:
                orientation: 'vertical'
                id: cubelist
                size_hint: 1, 1
        
                Label:
                    size_hint: 1, 1
                    text: "Scanning for cubes..."
                    font_size: '20sp'
                    height: '20sp'

    Screen:
        name: "connecting"
        id: connecting

        AnchorLayout:
            BoxLayout:
                size_hint: 0.8, None
                padding: '20sp'
                orientation: 'vertical'
                Label:
                    id: connecting_label
                    size_hint: 1, None
                    text: ""
                    font_size: '20sp'
                    size: self.texture_size
                ProgressBar:
                    size_hint: 1, None
                    id: connecting_progressbar
                    max: 100
                    height: '50sp'
                AnchorLayout:
                    size_hint: 1, None
                    connecting_cancelbutton: connecting_cancelbutton
                    height: connecting_cancelbutton.height
                    anchor_y: 'bottom'
                    DisconnectButton:
                        id: connecting_cancelbutton
                        size_hint: None, None
                        text: "Cancel"
                        font_size: '20sp'
                        size: self.texture_size[0] + dp(30), self.texture_size[1] + dp(30), 
                
                    
    Screen:
        name: "timer"
        BoxLayout:
            orientation: 'vertical'
            
            TimeDisplay:
                bcolor: 0, 0, 1, 0
                id: timedisplay
                size_hint: 1, 1
                font_size: self.width * 0.25
                text: "0.0"
                canvas.before:
                    Color:
                        rgba: self.bcolor
                    Rectangle:
                        pos: self.x - self.parent.x, self.y - self.parent.y
                        size: self.size
        
            PrimeButton:
                timedisplay: timedisplay
                size_hint: 1, None
                id: primebutton
                text: "Prime" if not timedisplay.primed else "Disarm"
                always_release: True
                height: '80sp'
                
            TimerButton:
                timedisplay: timedisplay
                size_hint: 1, None
                id: timerbutton
                text: "Start" if not timedisplay.running else "Stop"
                always_release: True
                height: '80sp'
        
            Label:
                size_hint: 1, None
                id: corner_pos
                font_size: '20dp'
                height: '22dp'
            Label:
                size_hint: 1, None
                id: corner_ori
                font_size: '20dp'
                height: '22dp'
            Label:
                size_hint: 1, None
                id: edge_pos
                font_size: '20dp'
                height: '22dp'
            Label:
                size_hint: 1, None
                id: edge_ori
                font_size: '20dp'
                height: '22dp'
            Label:
                size_hint: 1, None
                id: moves
                font_size: '20dp'
                height: '22dp'
                
            DisconnectButton:
                size_hint: 1, None
                id: disconnect
                text: "Disconnect cube"
                always_release: True
                height: '40sp'
